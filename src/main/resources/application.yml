spring:
  application:
    name: jarvis
    
  datasource:
    url: jdbc:postgresql://localhost:5432/jarvis
    username: jarvis
    password: jarvis_password
    driver-class-name: org.postgresql.Driver
    
  jpa:
    hibernate:
      ddl-auto: validate # Flyway handles schema
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
    show-sql: false
    
  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration
    
  ai:
    # Anthropic Claude configuration
    anthropic:
      api-key: ${ANTHROPIC_API_KEY:your-api-key-here}
      chat:
        options:
          model: claude-3-5-sonnet-20241022
          max-tokens: 4096
          temperature: 0.7
          
    # Vector store configuration
    vectorstore:
      pgvector:
        index-type: IVFFLAT
        distance-type: COSINE_DISTANCE
        dimensions: 384 # for all-MiniLM-L6-v2
        
    # Local embeddings using ONNX
    embedding:
      transformer:
        onnx:
          model-uri: classpath:/models/all-MiniLM-L6-v2.onnx
          
# Application configuration
jarvis:
  obsidian:
    vault-path: ${OBSIDIAN_VAULT_PATH:./obsidian-vault}
    watch-enabled: false # For MVP
    sync-on-startup: true
    
  chat:
    session-timeout-minutes: 60
    max-history-size: 20
    
  memory:
    classification:
      semantic-weight: 0.5
      structural-weight: 0.3
      context-weight: 0.2
      minimum-confidence: 0.1
      enable-ensemble: true
      enable-semantic-classifier: true
      enable-structural-classifier: true
      enable-context-classifier: true
    
  vector-search:
    max-results: 5
    min-similarity: 0.7
    
server:
  port: 8080
  
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
        
logging:
  level:
    com.jarvis: DEBUG
    org.springframework.ai: DEBUG
    org.flywaydb: INFO